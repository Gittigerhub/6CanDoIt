<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/superlayout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>조직 상세</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!--JQuery 반드시 추가-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--Jquery를 이용한 드래그 앤 드롭, 리사이즈, 애니메이션 등 인터랙티브 기능을 구현-->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <!--부트스트랩 아이콘-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!--알림창 스크립트-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
<div layout:fragment="content" class="p-5">

    <!-- 페이지 시작 -->
    <div class="container">
        <h2>조직 관리 > 매장 상세정보</h2>

        <div class="row p-5 bg-white">
            <div class="mb-3">
                <h3>매장 상세정보</h3>
            </div>

            <!-- 상세 테이블 시작 -->
            <input type="hidden" name="idx" id="organDTOidx" th:data-id="${organDTO.idx}">
            <table class="table table-bordered" style="text-align: center">
                <tbody> <!--조직 테이블 데이터 출력-->
                <tr style="height: 50px; vertical-align: middle">
                    <th style="width: 10%">분류</th>
                    <td style="width: 40%; text-align: left" th:text="${organDTO.organType}"></td>
                    <th style="width: 10%">상태</th>
                    <td style="width: 40%">
                        <div class="d-flex">
                            <button style="font-size: 12px" th:if="${organDTO.activeYn == 'Y'}" th:value="${organDTO.activeYn}" class="btn btn-primary justify-content-start">활성화</button>
                            <button style="font-size: 12px" th:unless="${organDTO.activeYn == 'Y'}" th:value="${organDTO.activeYn}" class="btn btn-danger justify-content-start">비활성화</button>
                        </div>
                    </td>
                </tr>
                <tr style="height: 50px; vertical-align: middle">
                    <th>업체명</th>
                    <td style="text-align: left" th:text="${organDTO.organName}"></td>
                    <th>대표 연락처</th>
                    <td style="text-align: left" th:text="${organDTO.organTel}"></td>
                </tr>
                <tr style="height: 50px; vertical-align: middle">
                    <th>주소</th>
                    <td colspan="3" style="text-align: left" th:text="${organDTO.organAddress}"></td>
                </tr>
                <tr style="height: 50px;">
                    <th style="vertical-align: middle">이미지</th>
                    <td colspan="3">
                        <div style="display: flex; flex-wrap: wrap; padding: 20px;">
                            <!-- 대표 이미지가 없을때 나오는 이미지 -->
                            <div style="flex-basis: 100%; text-align: left">
                                <th:block th:if="${!hasRepImage}">
                                    <img style="width: 300px; height: 300px; object-fit: cover; margin: 10px" src="https://sixcandoitimage.s3.ap-northeast-2.amazonaws.com/images/noimage.jpg" alt="noimage">
                                </th:block>
                            </div>
                            <!-- 이미지 -->
                            <th:block th:each="data:${imageFileDTOS}" th:if="${!hasRepImage}">
                                <th:block th:unless="${data.getRepimageYn()} == 'Y'">
                                    <div>
                                        <th:block th:unless="${data.getRepimageYn()} == 'Y'">
                                            <img style="width: 200px; height: 200px; object-fit: cover; margin: 10px" th:src="${data.url}" th:alt="${data.originName}">
                                            <div>
                                                <button type="button" class="btn btn-danger deleteBtn mb-4" th:value="${data.idx}">삭제</button>
                                            </div>
                                        </th:block>
                                    </div>
                                </th:block>
                            </th:block>

                            <th:block th:each="data:${imageFileDTOS}" th:if="${hasRepImage}">
                                <!-- 대표 이미지 -->
                                <th:block th:if="${data.getRepimageYn()} == 'Y'">
                                    <div style="flex-basis: 100%; text-align: left">
                                        <img style="width: 300px; height: 300px; object-fit: cover; margin: 10px" th:src="${data.url}" th:alt="${data.originName}">
                                        <div>
                                            <button type="button" class="btn btn-danger deleteBtn mb-4" style="margin-left: 130px" th:value="${data.idx}">삭제</button>
                                        </div>
                                    </div>
                                </th:block>
                            </th:block>
                            <th:block th:each="data:${imageFileDTOS}" th:if="${hasRepImage}">
                                <!-- 이미지 -->
                                <th:block th:unless="${data.getRepimageYn()} == 'Y'">
                                    <div>
                                        <img style="width: 200px; height: 200px; object-fit: cover; margin: 10px" th:src="${data.url}" th:alt="${data.originName}">
                                        <div>
                                            <button type="button" class="btn btn-danger deleteBtn mb-4" th:value="${data.idx}">삭제</button>
                                        </div>
                                    </div>
                                </th:block>
                            </th:block>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
            <!-- 상세 테이블 끝 -->

            <!-- 수정/취소 버튼 시작 -->
            <div class="d-flex justify-content-end mt-5">
                <button type="button" class="btn btn-success" id="btn-update" th:data-id="${organDTO.idx}">수정</button>
                <button type="button" class="btn btn-danger mx-4 btn-delete" th:data-id="${organDTO.idx}">삭제</button>
                <button type="button" class="btn btn-secondary"><a th:href="@{/office/list}" style="text-decoration: none; color: white">목록</a></button>
            </div>
            <!-- 수정/취소 버튼 끝 -->
        </div>
    </div>
    <!-- 페이지 끝 -->

</div>
</body>
</html>